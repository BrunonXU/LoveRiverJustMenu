# 爱心食谱 Web App - 产品需求文档（PRD）

## 1. 产品概述

### 1.1 产品定位
一款使用 Flutter 开发的极简高级美食菜谱应用，通过创新的手势交互和AI智能推荐，为情侣创造独特的烹饪体验。从私密分享起步，逐步发展为有温度的美食记忆平台。

### 1.2 产品愿景
- **短期目标**：打造市面上最简洁优雅的情侣菜谱应用
- **长期目标**：成为记录美食与情感的生活方式平台

### 1.3 目标用户
- **核心用户**：追求生活品质的年轻情侣（25-35岁）
- **扩展用户**：注重仪式感的都市白领、美食爱好者

### 1.4 核心差异化
- **极简设计**：95%黑白灰，5%彩色焦点
- **自然交互**：基于手势的全新操作方式
- **AI智能**：真正理解用户的推荐系统
- **情感记忆**：3D时光机记录美食历程

## 2. 功能需求

### 2.1 基础功能（P0 - 必须实现）

#### 2.1.1 极简菜谱管理
- **卡片式展示**
  - 单卡片焦点设计（参考碗勺图标风格）
  - 3D扁平化图标（120x120px）
  - 极简信息展示（菜名+时间）
  - 大量留白（≥30%）
- **创建流程**
  - 对话式引导（非表单）
  - AI自动识别食材
  - 语音输入为主
  - 最多5步完成
- **手势操作**
  - 上下滑动切换
  - 左右滑动操作
  - 无需任何按钮

#### 2.1.2 创新导航系统
- **时间驱动**
  - 根据时段自动切换内容
  - 早餐/午餐/晚餐智能识别
  - 无需手动切换Tab
- **手势导航**
  - 垂直滑动：浏览内容
  - 水平滑动：进入功能
  - 捏合展开：切换视图
  - 边缘滑入：快捷菜单
- **语音控制**
  - "我想吃..."自然对话
  - 无需精确命令
  - 支持方言识别

### 2.2 特色功能（P1 - 优先实现）

#### 2.2.1 AI智能推荐系统
- **故事化推荐**
  - 每个推荐都是一个故事
  - 情境化文案（"今晚降温了..."）
  - 个性化理由（基于历史偏好）
  - 对话式交互
- **多维度分析**
  - 天气感知：温度、湿度影响
  - 时间感知：早中晚自动切换
  - 健康追踪：营养均衡提醒
  - 库存匹配：冰箱食材识别
- **智能学习**
  - 记录选择偏好
  - 分析口味变化
  - 预测下次想吃什么

#### 2.2.2 美食时光机（3D记忆系统）
- **时间轴展示**
  - 3D螺旋时间隧道
  - 悬浮式记忆卡片
  - 重要记忆发光效果
  - 陀螺仪控制视角
- **数据可视化**
  - 口味地图：味觉雷达图
  - 情感日历：心情色彩化
  - 成长曲线：厨艺进步轨迹
  - 美食足迹：地理分布图
- **记忆交互**
  - 点击翻转查看详情
  - 长按进入回忆场景
  - 双指缩放时间密度

#### 2.2.3 创新手势系统
- **基础手势**
  - 上下滑动：内容浏览
  - 左右滑动：功能切换
  - 捏合/展开：视图切换
  - 画圈：随机推荐
- **高级手势**
  - 长按+滑动：精确控制
  - 双击+画心：快速收藏
  - 三指下滑：语音搜索
  - 边缘滑入：快捷菜单
- **手势学习**
  - 渐进式引导
  - 轨迹可视化
  - 成功反馈动画

### 2.3 互动功能（P2 - 次要功能）

#### 2.3.1 情侣互动
- **想吃清单**：标记想吃的菜，形成愿望清单
- **用餐评价**：星级评分 + 文字反馈
- **挑战任务**：每周新菜挑战，记录达成情况

#### 2.3.2 实用工具
- **烹饪计时器**：多步骤联动计时（原生通知提醒）
- **烹饪模式**：简化界面，大字体防误触，屏幕常亮
- **分量计算器**：根据用餐人数调整食材用量
- **语音输入**：利用原生语音识别快速记录

### 3.4 动画系统

#### 3.4.1 液态过渡
- **贝塞尔曲线**：自定义路径动画
- **形态变换**：元素流动效果
- **时长**：600-800ms
- **缓动**：cubic-bezier(0.45, 0, 0.55, 1)

#### 3.4.2 物理动画
- **重力系统**：下落加速度9.8
- **弹性碰撞**：反弹系数0.6
- **磁性吸附**：150px吸附半径
- **粒子系统**：20-50个粒子

#### 3.4.3 呼吸动画
```css
/* 多层呼吸效果 */
animation: 
  breathe-scale 4s infinite,
  breathe-opacity 4s infinite,
  breathe-blur 4s infinite;
```

### 3.5 创新交互模式

#### 3.5.1 时间感知
- 自动调整界面色温
- 智能推荐内容切换
- 问候语个性化
- 节假日特殊主题

#### 3.5.2 情境感知
- 天气影响推荐
- 地理位置菜系
- 用户状态识别
- 自动模式切换

#### 3.5.3 协同体验
- 异地同步烹饪
- 实时进度共享
- 视频通话集成
- 共享音乐播放

## 4. 技术实现

### 4.1 Flutter架构
```dart
// 推荐技术栈
- 状态管理: Riverpod 2.0
- 路由: go_router
- 动画: flutter_animate + rive
- 手势: gesture_detector_plus
- 3D: flutter_cube
- 物理引擎: flame
```

### 4.2 性能优化
- **动画性能**：保持60FPS
- **内存控制**：<150MB
- **启动优化**：<1.5s冷启动
- **包体积**：<30MB（不含资源）

### 4.3 代码规范
```
lib/
├── core/          # 核心模块
│   ├── gestures/  # 手势系统
│   ├── animations/# 动画引擎
│   └── ai/        # AI推荐
├── features/      # 功能模块
│   ├── timeline/  # 时光机
│   ├── cooking/   # 烹饪模式
│   └── sync/      # 协同功能
└── shared/        # 共享组件
    ├── widgets/   # UI组件
    └── themes/    # 主题系统
```

### 2.4 社交扩展（P3 - 未来扩展）

#### 2.4.1 分享机制
- 生成分享链接（无需登录可查看）
- 导出 PDF 食谱卡片
- 社交媒体分享（带预览图）

#### 2.4.2 社区功能
- **厨房传承**：邀请家人共同维护家族食谱
- **美食地图**：标注菜谱的地域特色和故事
- **食材交换**：发布多余食材信息（同城）

## 3. UI/UX设计规范

### 3.1 设计理念
- **极简美学**：每个界面只保留核心元素
- **大量留白**：内容区域占比≤70%
- **零干扰**：去除所有装饰性元素
- **自然交互**：基于真实物理世界

### 3.2 视觉设计系统

#### 3.2.1 色彩规范
```
基础色：
- 纯白 #FFFFFF (95%)
- 纯黑 #000000 (文字)
- 高级灰 #F7F7F7 (次要背景)

焦点色（仅5%使用）：
- 蓝紫渐变：#5B6FED → #8B9BF3
- 橙粉渐变：#FF6B6B → #FFE66D
- 成功绿：#48BB78
```

#### 3.2.2 字体系统
```
字体家族：
- iOS: 苹方-简 (PingFang SC)
- Android: 思源黑体 (Source Han Sans)
- 字重：100/300/500 (避免粗体)

字号规范：
- 48px: 时间显示
- 32px: 页面标题
- 24px: 卡片标题
- 18px: 重要信息
- 16px: 正文
- 14px: 辅助信息
```

#### 3.2.3 间距系统
```
基础单位：8px
间距序列：4, 8, 16, 24, 48, 64
页面边距：48px
卡片内边距：32px
元素间距：16px
```

### 3.3 核心组件设计

#### 3.3.1 极简卡片
- 圆角：24px
- 阴影：0 8px 32px rgba(0,0,0,0.08)
- 背景：纯白
- 图标：3D扁平化设计（渐变色）
- 动画：呼吸效果（4s循环）

#### 3.3.2 语音按钮
- 尺寸：56x56px
- 背景：纯黑圆形
- 位置：右下角悬浮
- 状态：脉冲动画（监听时）

#### 3.3.3 手势提示
- 形式：轨迹可视化
- 颜色：渐变轨迹
- 反馈：成功时变金色

## 5. 实施计划

### Phase 1 - 极简核心（4周）
- **Week 1-2**：设计系统搭建
  - 极简UI组件库
  - 手势识别框架
  - 动画引擎基础
- **Week 3-4**：核心功能
  - 单卡片浏览系统
  - AI推荐基础版
  - 语音交互框架

### Phase 2 - 智能体验（4周）
- **Week 5-6**：AI深化
  - 故事化推荐
  - 情境感知系统
  - 智能学习算法
- **Week 7-8**：手势完善
  - 组合手势支持
  - 手势自定义
  - 可视化反馈

### Phase 3 - 记忆系统（3周）
- **Week 9-10**：时光机
  - 3D时间轴
  - 数据可视化
  - 记忆交互
- **Week 11**：情感功能
  - 她的最爱空间
  - 爱心便签系统

### Phase 4 - 协同功能（3周）
- **Week 12-13**：同步烹饪
  - 实时状态同步
  - 视频通话集成
  - 共享体验
- **Week 14**：游戏化
  - 节奏烹饪
  - 成就系统
  - 排行榜

### Phase 5 - 发布准备（2周）
- **Week 15**：优化调试
  - 性能优化
  - 动画流畅度
  - 手势精准度
- **Week 16**：上架准备
  - 应用商店素材
  - 用户引导
  - A/B测试

## 5. 成功指标

### 5.1 用户指标
- 日活跃用户数（DAU）
- 用户创建菜谱数量
- 菜谱被查看次数

### 5.2 功能指标
- 智能推荐采纳率
- 分享功能使用率
- 用户停留时长

### 5.3 技术指标
- 页面加载速度
- 错误率 < 0.1%
- 移动端适配率 100%

## 6. 成功指标

### 6.1 用户体验指标
- **首次使用**：30秒内理解核心操作
- **手势识别率**：>95%准确率
- **加载时间**：<0.5秒响应
- **动画流畅度**：恒定60FPS

### 6.2 业务指标
- **日活跃率**：>40%
- **创建菜谱数**：人均>5个/月
- **使用时长**：>15分钟/天
- **推荐采纳率**：>60%

### 6.3 技术指标
- **崩溃率**：<0.1%
- **包体积**：<30MB
- **内存占用**：<150MB
- **电池消耗**：低于同类APP 30%

## 7. 风险与挑战

### 7.1 设计风险
- **极简过度**：功能不易发现
  - 解决：渐进式引导系统
- **手势冲突**：与系统手势冲突
  - 解决：避开系统保留手势
- **学习成本**：新用户上手难
  - 解决：直觉化设计+引导

### 7.2 技术挑战
- **动画性能**：复杂动画掉帧
  - 解决：分层渲染优化
- **手势精度**：识别准确率
  - 解决：机器学习优化
- **3D渲染**：时光机性能
  - 解决：LOD分级加载

### 7.3 开发建议
- 先实现核心手势，再扩展
- 动画从简单到复杂迭代
- 持续收集手势数据优化
- A/B测试不同交互方案

## 8. 数据模型设计

### 8.1 核心数据结构
```dart
class Recipe {
  String id;
  String name;              // 极简命名
  String icon;              // 3D图标URL
  int cookTime;             // 分钟
  List<String> tags;        // 最多3个
  DateTime createdAt;
  
  // AI相关
  String mood;              // 情绪标签
  String story;             // 背景故事
  Map<String, double> taste; // 口味向量
  
  // 记忆相关
  int makeCount;            // 制作次数
  double rating;            // 平均评分
  List<Memory> memories;    // 相关记忆
}

class Memory {
  String id;
  DateTime date;
  String emotion;           // 情绪emoji
  String photo;             // 成品照片
  String note;              // 私密笔记
  Location location;        // 地理位置
  Weather weather;          // 天气信息
}
```

### 8.2 手势数据
```dart
class GesturePattern {
  String type;              // 手势类型
  List<Point> path;         // 轨迹点
  double velocity;          // 速度
  double pressure;          // 压力
  Duration duration;        // 持续时间
  String action;            // 触发动作
}
```

## 9. 创新亮点总结

### 9.1 设计创新
1. **95%黑白灰**：极致的克制美学
2. **单卡片焦点**：消除选择困难
3. **3D扁平图标**：独特的视觉风格
4. **呼吸动画**：赋予生命感

### 9.2 交互创新
1. **全手势操作**：抛弃传统按钮
2. **时间驱动**：主动适应用户
3. **语音优先**：自然对话交互
4. **物理反馈**：真实的触感

### 9.3 技术创新
1. **液态动画**：流体形变效果
2. **3D时光机**：立体记忆展示
3. **AI故事化**：有温度的推荐
4. **实时协同**：异地同步体验

### 9.4 体验创新
1. **零学习成本**：凭直觉操作
2. **情感化设计**：每个细节有温度
3. **沉浸体验**：忘记界面存在
4. **持续惊喜**：不断发现新功能

## 10. 竞品差异化

### 10.1 对比分析
| 维度 | 传统菜谱APP | 爱心食谱 |
|-----|------------|---------|
| 界面 | 信息密集 | 极简留白 |
| 操作 | 点击按钮 | 手势控制 |
| 推荐 | 列表展示 | 故事叙述 |
| 记录 | 文字为主 | 3D可视化 |
| 定位 | 工具属性 | 情感连接 |

### 10.2 核心优势
- 不是菜谱工具，是情感记忆
- 不是信息展示，是沉浸体验
- 不是功能堆砌，是克制设计
- 不是冰冷交互，是温暖陪伴

## 11. 未来展望

### 11.1 技术演进
- **AR烹饪**：增强现实指导
- **AI伴侣**：情感化语音助手
- **IoT联动**：智能厨电控制
- **元宇宙**：虚拟烹饪空间

### 11.2 商业模式
- **订阅制**：高级AI功能
- **内容付费**：名厨独家菜谱
- **硬件联动**：智能厨具合作
- **品牌合作**：食材供应链

### 11.3 社区发展
- **私密分享**：从二人到家庭
- **兴趣圈层**：同好社区
- **内容共创**：UGC精品化
- **文化输出**：美食生活方式

## 12. 总结

爱心食谱不仅仅是一个菜谱应用，而是一个记录爱与美食的情感平台。通过极简的设计、创新的交互、智能的推荐，为用户创造独一无二的使用体验。每一个设计决策都围绕"简约、高级、有温度"的核心理念，让技术服务于情感，让产品成为生活的一部分。

**产品愿景**：让每一餐都成为值得记忆的时刻。

## 9. 数据模型设计

### 9.1 菜谱（Recipe）
```dart
class Recipe {
  String id;
  String title;
  String coverImage;
  List<String> images;
  List<Ingredient> ingredients;
  List<Step> steps;
  int prepTime;        // 分钟
  int cookTime;        // 分钟
  int difficulty;      // 1-5
  List<String> tags;
  String story;        // 背景故事
  DateTime createdAt;
  DateTime updatedAt;
  bool isFavorite;     // 她的最爱
  String privateNote;  // 爱心便签
  List<CookingRecord> records; // 烹饪记录
}
```

### 9.2 用户数据
```dart
class UserProfile {
  String userId;
  String nickname;
  String avatar;
  List<String> favoriteRecipes;
  List<String> wishList;      // 想吃清单
  Map<String, dynamic> preferences; // 偏好设置
  DateTime lastSyncTime;
}
```

## 10. 安全与隐私

### 10.1 数据安全
- 本地数据使用 SQLCipher 加密
- 敏感数据（如私密便签）额外加密存储
- 网络传输使用 HTTPS
- 图片上传前自动压缩，去除 EXIF 信息

### 10.2 隐私保护
- 支持游客模式（无需注册即可使用基础功能）
- 私密菜谱需要生物识别/PIN码验证
- 分享链接支持设置密码和有效期
- 遵循 GDPR 和国内隐私法规

## 11. UI/UX 详细规范

### 11.1 设计原则
- **色彩方案**
  - 主色：温暖橙色 (#FF6B35)
  - 辅助色：清新绿色 (#A8E6CF)
  - 背景：米白色 (#FFF8E7)
  - 深色模式：深灰底色 (#1A1A1A)

### 11.2 交互规范
- **手势操作**
  - 左滑：快速收藏/取消收藏
  - 右滑：进入编辑模式
  - 双击：放大查看图片
  - 长按：批量选择模式
  - 下拉：刷新数据
  - 上拉：加载更多

### 11.3 动画效果
- 页面切换：Hero 动画
- 列表滚动：渐入效果
- 按钮点击：涟漪效果
- 收藏动画：心形放大
- 加载动画：食物图标旋转

## 12. 测试策略

### 12.1 测试类型
- 单元测试：业务逻辑覆盖率 > 80%
- Widget 测试：关键组件 UI 测试
- 集成测试：核心用户流程
- 性能测试：列表滚动、图片加载
- 兼容性测试：iOS 12+、Android 5.0+

### 12.2 测试用例优先级
- P0：菜谱创建、浏览、搜索
- P1：数据同步、离线模式
- P2：分享功能、个性化设置

## 14. API 设计（云端同步）

### 14.1 RESTful API 规范
```
基础URL: https://api.loverecipe.app/v1

认证方式: Bearer Token (JWT)

主要接口:
POST   /auth/login          # 用户登录
POST   /auth/register       # 用户注册
GET    /recipes             # 获取菜谱列表
POST   /recipes             # 创建菜谱
PUT    /recipes/:id         # 更新菜谱
DELETE /recipes/:id         # 删除菜谱
POST   /recipes/:id/favorite # 收藏菜谱
POST   /sync                # 批量同步数据
```

### 14.2 数据同步策略
- 增量同步：基于时间戳的变更同步
- 冲突解决：最后修改时间优先
- 离线队列：本地操作队列，联网后自动同步
- 同步状态：UI 实时显示同步进度

## 15. 版本迭代计划

### 15.1 版本规划
- **v1.0.0** - MVP版本
  - 核心功能完整
  - 本地存储
  - 基础UI
  
- **v1.1.0** - 个性化版本
  - 爱心便签
  - 她的最爱
  - 智能推荐
  
- **v1.2.0** - 云同步版本
  - 用户系统
  - 数据同步
  - 分享功能
  
- **v2.0.0** - 社交版本
  - 社区功能
  - 评论系统
  - 达人认证

### 15.2 发版策略
- 开发环境 → 测试环境 → 预发布 → 正式发布
- iOS TestFlight 内测（100人）
- Android 分阶段发布（5% → 20% → 50% → 100%）
- 热修复准备（Flutter CodePush）

## 16. 竞品分析

### 16.1 主要竞品
1. **下厨房**
   - 优势：内容丰富、社区活跃
   - 劣势：功能复杂、个性化不足
   
2. **豆果美食**
   - 优势：视频教程、步骤详细
   - 劣势：广告较多、界面传统
   
3. **Kitchen Stories**
   - 优势：设计精美、国际化
   - 劣势：本地化不足、内容更新慢

### 16.2 差异化策略
- **情感连接**：强调"为爱下厨"的温度
- **极简设计**：去除复杂功能，专注核心体验
- **私密分享**：从小圈子开始，逐步扩展
- **故事化**：每道菜都有温度和记忆

## 17. 风险应对方案

### 17.1 技术风险应对
- **Flutter Web 性能**：优先移动端，Web作为补充
- **图片存储成本**：智能压缩 + CDN 优化
- **数据同步冲突**：完善的冲突解决机制

### 17.2 运营风险应对
- **用户增长缓慢**：种子用户运营 + 口碑传播
- **内容质量**：UGC审核 + 官方精选
- **商业化探索**：谨慎测试，不影响用户体验

## 19. 用户故事示例

### 19.1 核心用户故事
1. **作为一个想为女朋友做饭的男生**
   - 我希望快速找到简单易做的菜谱
   - 这样我可以做出美味的饭菜给她惊喜
   
2. **作为菜谱的查看者（女朋友）**
   - 我希望看到他为这道菜付出的心思
   - 这样我能感受到他的用心和爱意
   
3. **作为一个烹饪新手**
   - 我希望有详细的步骤指导和时间提醒
   - 这样我不会手忙脚乱做失败

### 19.2 使用场景
- **场景1**：周末想做顿特别的晚餐
- **场景2**：纪念日准备惊喜菜谱
- **场景3**：异地恋分享今天做的菜
- **场景4**：记录第一次成功的菜品

## 20. 错误处理与异常情况

### 20.1 网络异常
- 无网络：自动切换离线模式，队列同步
- 网络慢：显示加载进度，支持取消
- 同步失败：3次重试机制，失败后提示

### 20.2 数据异常
- 图片加载失败：显示占位图，支持重试
- 数据损坏：本地备份恢复机制
- 存储空间不足：智能清理缓存提示

### 20.3 用户友好提示
- 空状态设计：引导用户创建第一个菜谱
- 错误提示：温暖的文案，避免技术术语
- 操作引导：新手引导，关键功能提示

## 21. 国际化与本地化

### 21.1 多语言支持
- 初期支持：简体中文、繁体中文、英文
- 文案本地化：贴合当地文化习惯
- 日期格式：根据地区自动调整
- 度量单位：公制/英制自动切换

### 21.2 内容本地化
- 菜系分类：根据地区显示本地菜系
- 食材名称：支持方言别名搜索
- 节日推荐：根据当地节日推荐菜谱

## 22. 辅助功能设计

### 22.1 无障碍支持
- 语音朗读：支持 TalkBack/VoiceOver
- 字体缩放：支持系统级字体大小
- 高对比度：深色模式优化
- 手势简化：单手操作优化

### 22.2 特殊需求
- 色盲模式：避免仅用颜色区分
- 大字体模式：老年用户友好
- 简化模式：减少视觉干扰

## 23. 合规性要求

### 23.1 隐私合规
- 隐私政策：清晰的数据使用说明
- 用户协议：明确的服务条款
- 数据删除：支持账号注销和数据清除
- 儿童保护：13岁以下用户限制

### 23.2 内容审核
- 图片审核：自动识别不当内容
- 文字过滤：敏感词检测
- 举报机制：用户举报处理流程
- 版权保护：原创内容标识

## 24. 推广与运营策略

### 24.1 种子用户获取
- 社交媒体：小红书/抖音美食分享
- KOL合作：美食博主体验推广
- 情侣社群：情侣相关社区推广
- 口碑传播：邀请好友奖励机制

### 24.2 用户留存策略
- 新手任务：完成获得成就勋章
- 每日推荐：推送今日特色菜谱
- 节日活动：特殊节日菜谱专题
- 社区互动：每周烹饪挑战赛

## 25. 总结

本产品以"为爱下厨"为核心理念，通过Flutter跨平台技术，打造一款有温度、有故事的菜谱分享应用。产品设计充分考虑了用户情感需求，技术实现注重性能和体验，运营策略强调口碑和社区建设。通过分阶段迭代，逐步从工具型产品发展为社交平台，最终实现"让每一道菜都充满爱"的产品愿景。